{
    "i18n": false,
    "type": "tabs",
    "items": {
        "can_adapter": {
            "type": "panel",
            "label": "CAN Adapter",
            "items": {
                "adapter_ext_header": {
                    "type": "header",
                    "text": "External CAN Adapter",
                    "size": 2,
                    "newLine": false
                },
                "adapter_ext_name": {
                    "type": "text",
                    "label": "Adapter Name",
                    "tooltip": "Device mame of CAN adapter connected to external bus, e.g. can0",
                    "default" : "vcan0",
                    "newLine": false
                },
                "adapter_ext_activated": {
                    "type": "checkbox",
                    "label": "Connect to Adapter",
                    "tooltip": "Check, if this adapter shall be used.",
                    "default" : true,
                    "newLine": false
                },        
                "adapter_int_header": {
                    "type": "header",
                    "text": "Internal CAN Adapter",
                    "size": 2,
                    "newLine": true
                },
                "adapter_int_name": {
                    "type": "text",
                    "label": "Adapter Name",
                    "tooltip": "Device mame of CAN adapter connected to internal bus, e.g. can1",
                    "default" : "vcan1",
                    "newLine": false
                },
                "adapter_int_activated": {
                    "type": "checkbox",
                    "label": "Connect to Adapter",
                    "tooltip": "Check, if this adapter shall be used.",
                    "default" : false,
                    "newLine": false
                }        
            }
        },
        "can_adapter_ext": {
            "type": "panel",
            "label": "Assignments to External CAN Adapter",
            "items": {
                "e380_header": {
                    "type": "header",
                    "text": "Energy Meter E380",
                    "size": 2,
                    "newLine": true
                },
                "e380WarnUpdateTime": {
                    "type": "staticText",
                    "text": "WARNING: Values below 2 seconds may cause heavy system load!",
                    "newLine": true,
                    "hidden": "if (data.can_adapter_ext.e380_delay < 2) { return false; }; return true;",
                    "style": {
                        "color": "red"
                    }
                },
                "e380_name": {
                    "type": "text",
                    "label": "Name",
                    "tooltip": "This text will be used as base for object tree",
                    "default" : "e380",
                    "newLine": true
                },
                "e380_tree": {
                    "type": "checkbox",
                    "label": "tree states",
                    "tooltip": "Show data as tree of obejcts",
                    "default" : true,
                    "newLine": false
                },
                "e380_json": {
                    "type": "checkbox",
                    "label": "json states",
                    "tooltip": "Show data as JSON obejcts",
                    "default" : false,
                    "newLine": false
                },
                "e380_delay": {
                    "type": "number",
                    "label": "Min. update time (s)",
                    "tooltip": "Minumum update time for states. 0 for immediate update.",
                    "default" : 5,
                    "min": 0,
                    "newLine": false
                },
                "tableHdrCol": {
                    "type": "header",
                    "text": "Collecting Data on External CAN Adapter",
                    "size": 2
                },

                "introTableColExt": {
                    "type": "staticText",
                    "text": "Listen for data on addresses given in this table. No writing to CAN bus.",
                    "newLine": true
                },

                "tableColExtErrDevName": {
                    "type": "staticText",
                    "text": "ERROR: column 'Name of Device' must contain unique text",
                    "newLine": true,
                    "hidden": "const x={}; for(let ii=0; data.table_collect_ext && ii<data.table_collect_ext.length; ii++){const t=data.table_collect_ext[ii].collect_dev_name; if (x[t]==='x') return false; x[t]='x';}; return true;",
                    "style": {
                        "color": "red"
                    }
                },

                "tableColExtErrUniqueCanId": {
                    "type": "staticText",
                    "text": "ERROR: column 'CAN ID' must contain unique IDs",
                    "newLine": true,
                    "hidden": "const x={}; for(let ii=0; data.table_collect_ext && ii<data.table_collect_ext.length; ii++){const t=data.table_collect_ext[ii].collect_canid; if (x[t]==='x') return false; x[t]='x';}; return true;",
                    "style": {
                        "color": "red"
                    }
                },

                "tableColExtErrCanId": {
                    "type": "staticText",
                    "text": "ERROR: column 'CAN ID' must follow hex pattern e.g. '0x451'",
                    "newLine": true,
                    "hidden": "if (!data.table_collect_ext) return true; for (const c of data.table_collect_ext) {if ((String([c.collect_canid]) != String(c.collect_canid.match(/0[xX][0-9a-fA-F]+/)))) return false;}; return true;",
                    "style": {
                        "color": "red"
                    }
                },

                "table_collect_ext": {
                    "type": "table",
                    "newLine": true,
                    "sm": 12,
                    "md": 12,
                    "lg": 12,
                    "label": "",
                    "showSecondAddAt": 5,
                    "items": [
                        {
                            "type": "text",
                            "attr": "collect_dev_name",
                            "width": "15% ",
                            "title": "Name of Device",
                            "tooltip": "This text will be used as base for object tree",
                            "filter": false,
                            "sort": false,
                            "default": "vx3",
                            "validator": "const x={};for (const c of globalData.table_collect_ext) {if (x[c.collect_dev_name]==='x') return false; x[c.collect_dev_name]='x';}; return true;",
                            "validatorNoSaveOnError": true
                        },
                        {
                            "type": "checkbox",
                            "attr": "collect_tree_states",
                            "width": "10% ",
                            "title": "tree states",
                            "tooltip": "Show data as tree of obejcts",
                            "filter": false,
                            "sort": false,
                            "default": true
                        },
                        {
                            "type": "checkbox",
                            "attr": "collect_json_states",
                            "width": "10% ",
                            "title": "json states",
                            "tooltip": "Show data as JSON obejcts",
                            "filter": false,
                            "sort": false,
                            "default": false
                        },
                        {
                            "type": "number",
                            "attr": "collect_delay_time",
                            "width": "15% ",
                            "title": "Min. update time (s)",
                            "tooltip": "Minumum update time for states. 0 for immediate update.",
                            "filter": false,
                            "sort": false,
                            "min": 0,
                            "step": 1,
                            "default": 5
                        },
                        {
                            "type": "text",
                            "attr": "collect_canid",
                            "width": "10% ",
                            "title": "CAN ID",
                            "tooltip": "CAN ID to listen for data of this device.",
                            "filter": false,
                            "sort": false,
                            "default": "0x451",
                            "validator": "return data.collect_canid.match(/0[xX][0-9a-fA-F]+/);",
                            "validatorNoSaveOnError": true
                        }
                    ]
                },
                "tableHdrUds": {
                    "type": "header",
                    "text": "Requesting and Writing Data on External CAN Adapter via UDSonCAN",
                    "size": 2
                },

                "introTableUds": {
                    "type": "staticText",
                    "text": "Actively request wead- and write-operations to specified data identifiers",
                    "newLine": true
                },
                "tableUdsErrDevAddr": {
                    "type": "staticText",
                    "text": "ERROR: column 'Device Address' must follow hex pattern e.g. '0x451'",
                    "newLine": true,
                    "hidden": "if (!data.table_uds) return true; for (const c of data.table_uds) {if ((String([c.uds_dev_addr]) != String(c.uds_dev_addr.match(/0[xX][0-9a-fA-F]+/)))) return false;}; return true;",
                    "style": {
                        "color": "red"
                    }
                },

                "table_uds": {
                    "type": "table",
                    "newLine": true,
                    "sm": 12,
                    "md": 12,
                    "lg": 12,
                    "label": "",
                    "showSecondAddAt": 5,
                    "items": [
                        {
                            "type": "number",
                            "attr": "uds_schedule",
                            "width": "10% ",
                            "title": "Schedule (s)",
                            "tooltip": "Schedule for requesting given DIDs",
                            "filter": false,
                            "sort": false,
                            "min": 1,
                            "step": 1,
                            "default": 15
                        },
                        {
                            "type": "text",
                            "attr": "uds_dev_name",
                            "width": "15% ",
                            "title": "Name of Device",
                            "tooltip": "This text will be used as base for object tree",
                            "filter": false,
                            "sort": false,
                            "default": "vitocal"
                        },
                        {
                            "type": "checkbox",
                            "attr": "uds_tree_states",
                            "width": "10% ",
                            "title": "tree states",
                            "tooltip": "Show data as tree of obejcts",
                            "filter": false,
                            "sort": false,
                            "default": true
                        },
                        {
                            "type": "checkbox",
                            "attr": "uds_json_states",
                            "width": "10% ",
                            "title": "json states",
                            "tooltip": "Show data as JSON obejcts",
                            "filter": false,
                            "sort": false,
                            "default": false
                        },
                        {
                            "type": "text",
                            "attr": "uds_dev_addr",
                            "width": "10% ",
                            "title": "Device Address",
                            "tooltip": "Device Address to send requests to.",
                            "filter": false,
                            "sort": false,
                            "default": "0x680",
                            "validator": "return data.uds_dev_addr.match(/0[xX][0-9a-fA-F]+/);",
                            "validatorNoSaveOnError": true
                        },
                        {
                            "type": "text",
                            "attr": "uds_dids",
                            "width": "20% ",
                            "title": "List of DIDs",
                            "tooltip": "Separate by comma! All given DIDs will be requested with specified schedule an ECU address.",
                            "filter": false,
                            "sort": false,
                            "default": "256"
                        }
                    ]
                }
            }
        },
        "can_adapter_int": {
            "type": "panel",
            "label": "Assignments to Internal CAN Adapter",
            "items": {
                "tableHdr": {
                    "type": "header",
                    "text": "Collecting Data on Internal CAN Adapter",
                    "size": 2
                },

                "introTableColInt": {
                    "type": "staticText",
                    "text": "Listen for data on addresses given in this table. No writing to CAN bus.",
                    "newLine": true
                },

                "tableColIntErrDevName": {
                    "type": "staticText",
                    "text": "ERROR: column 'Name of Device' must contain unique text",
                    "newLine": true,
                    "hidden": "const x={}; for(let ii=0; data.table_collect_int && ii<data.table_collect_int.length; ii++){const t=data.table_collect_int[ii].collect_dev_name; if (x[t]==='x') return false; x[t]='x';}; return true;",
                    "style": {
                        "color": "red"
                    }
                },

                "tableColIntErrUniqueCanId": {
                    "type": "staticText",
                    "text": "ERROR: column 'CAN ID' must contain unique IDs",
                    "newLine": true,
                    "hidden": "const x={}; for(let ii=0; data.table_collect_int && ii<data.table_collect_int.length; ii++){const t=data.table_collect_int[ii].collect_canid; if (x[t]==='x') return false; x[t]='x';}; return true;",
                    "style": {
                        "color": "red"
                    }
                },

                "tableColIntErrCanId": {
                    "type": "staticText",
                    "text": "ERROR: column 'CAN ID' must follow hex pattern e.g. '0x451'",
                    "newLine": true,
                    "hidden": "if (!data.table_collect_int) return true; for (const c of data.table_collect_int) {if ((String([c.collect_canid]) != String(c.collect_canid.match(/0[xX][0-9a-fA-F]+/)))) return false;}; return true;",
                    "style": {
                        "color": "red"
                    }
                },

                "table_collect_int": {
                    "type": "table",
                    "newLine": true,
                    "sm": 12,
                    "md": 12,
                    "lg": 12,
                    "label": "",
                    "showSecondAddAt": 5,
                    "items": [
                        {
                            "type": "text",
                            "attr": "collect_dev_name",
                            "width": "15% ",
                            "title": "Name of Device",
                            "tooltip": "This text will be used as base for object tree",
                            "filter": false,
                            "sort": false,
                            "default": "vitocal",
                            "validator": "const x={};for (const c of globalData.table_collect_int) {if (x[c.collect_dev_name]==='x') return false; x[c.collect_dev_name]='x';}; return true;",
                            "validatorNoSaveOnError": true
                        },
                        {
                            "type": "checkbox",
                            "attr": "collect_tree_states",
                            "width": "10% ",
                            "title": "tree states",
                            "tooltip": "Show data as tree of obejcts",
                            "filter": false,
                            "sort": false,
                            "default": true
                        },
                        {
                            "type": "checkbox",
                            "attr": "collect_json_states",
                            "width": "10% ",
                            "title": "json states",
                            "tooltip": "Show data as JSON obejcts",
                            "filter": false,
                            "sort": false,
                            "default": false
                        },
                        {
                            "type": "number",
                            "attr": "collect_delay_time",
                            "width": "15% ",
                            "title": "Min. update time (s)",
                            "tooltip": "Minumum update time for states. 0 for immediate update.",
                            "filter": false,
                            "sort": false,
                            "min": 0,
                            "step": 1,
                            "default": 5
                        },
                        {
                            "type": "text",
                            "attr": "collect_canid",
                            "width": "10% ",
                            "title": "CAN ID",
                            "tooltip": "CAN ID to listen for data of this device.",
                            "filter": false,
                            "sort": false,
                            "default": "0x693",
                            "validator": "return data.collect_canid.match(/0[xX][0-9a-fA-F]+/);",
                            "validatorNoSaveOnError": true
                        }
                    ]
                }
            }
        }
    }
}